"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[3418],{3418:(z,p,s)=>{s.r(p),s.d(p,{Tab1PageModule:()=>M});var a=s(1075),c=s(177),m=s(4341),h=s(1307),u=s(8189),e=s(4438),g=s(5312),f=s(7673),y=s(6354),v=s(1626);const C=g.c.apiKey,T=g.c.apiUrl;let A=(()=>{var i;class r{constructor(t){this.http=t,this.articlesByCategoryAndPage={}}executeQuery(t){return this.http.get(`${T}${t}`,{params:{apiKey:C,country:"us"}})}getTopHeadlines(){return this.getTopHeadLinesByCategory("general")}getTopHeadLinesByCategory(t,n=!1){return n?this.getArticlesByCategory(t):this.articlesByCategoryAndPage[t]?(0,f.of)(this.articlesByCategoryAndPage[t].articles):this.getArticlesByCategory(t)}getArticlesByCategory(t){Object.keys(this.articlesByCategoryAndPage).includes(t)||(this.articlesByCategoryAndPage[t]={page:0,articles:[]});const n=this.articlesByCategoryAndPage[t].page+1;return this.executeQuery(`/top-headlines?category=${t}&page=${n}`).pipe((0,y.T)(({articles:l})=>(0===l.length||(this.articlesByCategoryAndPage[t]={page:n,articles:[...this.articlesByCategoryAndPage[t].articles,...l]}),this.articlesByCategoryAndPage[t].articles)))}}return(i=r).\u0275fac=function(t){return new(t||i)(e.KVO(v.Qq))},i.\u0275prov=e.jDH({token:i,factory:i.\u0275fac,providedIn:"root"}),r})();var b=s(9214),P=s(467),B=s(1670),F=s(2872),S=s(1320);function I(i,r){if(1&i){const o=e.RV6();e.j41(0,"ion-img",11),e.bIt("click",function(){e.eBV(o);const n=e.XpG();return e.Njj(n.openArticle())}),e.k0s()}if(2&i){const o=e.XpG();e.Y8G("src",o.article.urlToImage)}}function j(i,r){if(1&i&&(e.j41(0,"ion-card-content")(1,"p"),e.EFF(2),e.k0s()()),2&i){const o=e.XpG();e.R7$(2),e.JRh(o.article.description)}}let x=(()=>{var i;class r{constructor(t,n,l,d){this.iab=t,this.platform=n,this.actionSheetCtrl=l,this.socialSharing=d,this.index=0}openArticle(){this.platform.is("ios")||this.platform.is("android")?this.iab.create(this.article.url).show():window.open(this.article.url,"_blank")}onOpenMenu(){var t=this;return(0,P.A)(function*(){const n=[{text:"Favorito",icon:"heart-outline",handler:()=>t.onToggleFavorite()},{text:"Cancelar",icon:"close-outline",role:"cancel"}],l={text:"Compartir",icon:"share-outline",handler:()=>t.onShareActicle()};t.platform.is("capacitor")&&n.unshift(l),yield(yield t.actionSheetCtrl.create({header:"Opciones",buttons:n})).present()})()}onShareActicle(){this.socialSharing.share(this.article.title,this.article.source.name,"",this.article.url)}onToggleFavorite(){}}return(i=r).\u0275fac=function(t){return new(t||i)(e.rXU(B.N),e.rXU(F.OD),e.rXU(a.GD),e.rXU(S.s))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-article"]],inputs:{index:"index",article:"article"},decls:15,vars:5,consts:[[1,"ion-margin"],[1,"ion-align-items-center"],[1,"ion-margin",3,"click"],[1,"text-primary"],[1,"article-source-name"],["align","right"],["fill","clear",3,"click"],["slot","icon-only","name","ellipsis-vertical-outline"],[1,"ion-padding-horizontal","ion-margin-bottom"],[3,"src","click",4,"ngIf"],[4,"ngIf"],[3,"click","src"]],template:function(t,n){1&t&&(e.j41(0,"ion-card")(1,"ion-card-subtitle",0)(2,"ion-row",1)(3,"ion-col",2),e.bIt("click",function(){return n.openArticle()}),e.j41(4,"span",3),e.EFF(5),e.k0s(),e.j41(6,"span",4),e.EFF(7),e.k0s()(),e.j41(8,"ion-col",5)(9,"ion-button",6),e.bIt("click",function(){return n.onOpenMenu()}),e.nrm(10,"ion-icon",7),e.k0s()()()(),e.j41(11,"ion-card-title",8),e.EFF(12),e.k0s(),e.DNE(13,I,1,1,"ion-img",9)(14,j,3,1,"ion-card-content",10),e.k0s()),2&t&&(e.R7$(5),e.SpI("",n.index+1,". "),e.R7$(2),e.JRh(n.article.source.name),e.R7$(5),e.SpI(" ",n.article.title," "),e.R7$(),e.Y8G("ngIf",n.article.urlToImage),e.R7$(),e.Y8G("ngIf",n.article.description))},dependencies:[c.bT,a.Jm,a.b_,a.I9,a.HW,a.tN,a.hU,a.iq,a.KW,a.ln]}),r})();function G(i,r){if(1&i&&(e.j41(0,"ion-col",2),e.nrm(1,"app-article",3),e.k0s()),2&i){const o=r.$implicit,t=r.index;e.R7$(),e.Y8G("article",o)("index",t)}}let R=(()=>{var i;class r{constructor(){this.articles=[]}}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275cmp=e.VBU({type:i,selectors:[["app-articles"]],inputs:{articles:"articles"},decls:3,vars:1,consts:[["fixed",""],["size","12","size-lg","3","size-md","4","size-sm","6","size-xs","12",4,"ngFor","ngForOf"],["size","12","size-lg","3","size-md","4","size-sm","6","size-xs","12"],[3,"article","index"]],template:function(t,n){1&t&&(e.j41(0,"ion-grid",0)(1,"ion-row"),e.DNE(2,G,2,2,"ion-col",1),e.k0s()()),2&t&&(e.R7$(2),e.Y8G("ngForOf",n.articles))},dependencies:[c.Sq,a.hU,a.lO,a.ln,x]}),r})();const $=[{path:"",component:(()=>{var i;class r{constructor(t,n){this.newsService=t,this.authService=n,this.articles=[]}ngOnInit(){this.newsService.getTopHeadlines().subscribe(t=>{this.articles.push(...t)})}loadData(){this.newsService.getTopHeadLinesByCategory("general",!0).subscribe(t=>{t.length!==this.articles.length?(this.articles=t,setTimeout(()=>{this.infiniteScroll.complete()},1500)):this.infiniteScroll.disabled=!0})}}return(i=r).\u0275fac=function(t){return new(t||i)(e.rXU(A),e.rXU(b.k))},i.\u0275cmp=e.VBU({type:i,selectors:[["app-tab1"]],viewQuery:function(t,n){if(1&t&&e.GBs(a.Ax,7),2&t){let l;e.mGM(l=e.lsd())&&(n.infiniteScroll=l.first)}},decls:12,vars:3,consts:[["mode","ios",1,"ion-no-border",3,"translucent"],["mode","ios",1,"ion-no-border",3,"fullscreen"],["collapse","condense"],["size","large"],[3,"articles"],["threshold","25%","position","bottom",3,"ionInfinite"],["loadingSpinner","bubbles","loadingText","Cargando..."]],template:function(t,n){1&t&&(e.j41(0,"ion-header",0)(1,"ion-toolbar")(2,"ion-title"),e.EFF(3," Noticias recientes "),e.k0s()()(),e.j41(4,"ion-content",1)(5,"ion-header",2)(6,"ion-toolbar")(7,"ion-title",3),e.EFF(8,"Noticias recientes"),e.k0s()()(),e.nrm(9,"app-articles",4),e.j41(10,"ion-infinite-scroll",5),e.bIt("ionInfinite",function(){return n.loadData()}),e.nrm(11,"ion-infinite-scroll-content",6),e.k0s()()),2&t&&(e.Y8G("translucent",!0),e.R7$(4),e.Y8G("fullscreen",!0),e.R7$(5),e.Y8G("articles",n.articles))},dependencies:[a.W9,a.eU,a.Ax,a.Hp,a.BC,a.ai,R]}),r})()}];let U=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[u.iI.forChild($),u.iI]}),r})();var k=s(5553);let M=(()=>{var i;class r{}return(i=r).\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.$C({type:i}),i.\u0275inj=e.G2t({imports:[a.bv,c.MD,m.YN,h.S,U,k.h]}),r})()}}]);